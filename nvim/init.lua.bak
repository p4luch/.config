local fn = vim.fn -- to call Vim functions e.g. fn.bufnr()
local g = vim.g -- a table to access glabal variables
local opt = vim.opt -- to set options
-- BEGIN Basic editor configuration
-- defaults by nvim (not changed here but remain visible)
opt.hidden = true -- enable background buffers
opt.backspace = { "indent", "eol", "start" }
opt.joinspaces = false
opt.list = false
opt.linebreak = false
opt.showmode = true
opt.cursorline = true
opt.inccommand = "nosplit"
opt.encoding = "utf8"
opt.autoindent = true
opt.ruler = true

opt.termguicolors = true
opt.background = "dark"
opt.scrolloff = 5
opt.syntax = "on"
opt.errorbells = false
opt.visualbell = false
opt.autowrite = true
opt.clipboard = "unnamedplus"
opt.completeopt = "menuone,noinsert,noselect"
opt.smartindent = true
g.mapleader = ","
opt.mouse = ""

-- layout
opt.splitbelow = true
opt.splitright = true
opt.signcolumn = "auto"
opt.lazyredraw = true
opt.colorcolumn = "80"

-- indentation & tabs
opt.expandtab = true
opt.tabstop = 2
opt.shiftwidth = 2
opt.softtabstop = 2
opt.shiftround = true

-- line wrapping
opt.wrap = false

-- line numbering
opt.number = true
opt.numberwidth = 5 -- make column with line numbers wider
opt.relativenumber = true

-- search options
opt.incsearch = true
opt.hlsearch = true
opt.showmatch = true
opt.ignorecase = true
opt.smartcase = true

-- Enable backups, set custom swap and undo directories
opt.backupdir = fn.expand("~/.config/nvim-data/backup")
opt.backup = true
opt.swapfile = false -- disable swap files, keep swap dir config
opt.directory = fn.expand("~/.config/nvim-data/swap")
opt.undodir = fn.expand("~/.config/nvim-data/undo")
opt.undofile = true

-- Display statusline no matter how many windows are open
opt.laststatus = 2

-- END Basic editor configuration

-- BEGIN Custom key mapping

local options = { noremap = true, silent = true }
local map = vim.api.nvim_set_keymap

-- open new tab with empty file
map("n", "<leader>t", "<cmd>:tabe<cr>", options)

-- Easier file save
map("n", "<Leader>w", "<cmd>:w<CR>", options)

-- Close
map("n", "qq", "<cmd>q<CR>", options)

-- tf and tf - Forward and backwards tabs
map("n", "tr", "<cmd>tabprevious<cr>", options)
map("n", "tf", "<cmd>tabNext<cr>", options)

-- Move selected line / block of text in visual mode
map("x", "K", ":move '<-2<CR>gv-gv", options)
map("x", "J", ":move '>+1<CR>gv-gv", options)

-- Center search results
map("n", "n", "nzz", options)
map("n", "N", "Nzz", options)

--  END Custom key mapping

-- BEGIN Load external modules
require("plugins")
require("plugins_config")
require("autocmd")
-- END Load external modules
